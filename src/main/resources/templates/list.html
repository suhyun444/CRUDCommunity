<!DOCTYPE html>
<html>
<head>
    <title>게시판</title>
    <style>
        .post {
            border-bottom: 1px solid #000000;
            margin: 5px;
            padding: 5px;
        }
        .frame{
            width : 900px;
            height : 1800px;
            margin:auto;
            border: 1px solid #000000;
            background-color: #FFFFFF;
        }
        .cover{
            text-align:center;
            width : 900px;
            height : 150px;
            margin:auto;
            border: 1px solid #000000;
            background-color: #FFFFFF;
        }
        .bg{
            background-color: #dcdcdc;
        }

    </style>
</head>
<body>

<div id="main-bg" class="bg">
    <div id="posts-cover" class="cover">
        <h1 style="height:50px">게시판</h1>
        <button type="button" onclick="location.href='http://localhost:8080/write'" style="cursor:pointer;margin-top:20px;margin-left:780px;width:80px;height:30px;">글 쓰기</button>
    </div>
    <div id="posts-frame" class="frame">
        <div id="posts-container">
            <div id="post-info" style="background-color:#ececec;margin:0px;padding:10px;border-bottom:1px solid #000000;">
                <span style="display:inline-block; width:80px; text-align:center;">번호</span><span style="display:inline-block; width:485px;text-align:left;">제목</span><span style="display:inline-block; width:215px;text-align:left;">작성자</span><span style="display:inline-block; width:100px;text-align:center;">작성일</span>
            </div>
        </div>
    </div>
</div>


<script>
    function renderPosts(titles) {
        const postsContainer = document.getElementById('posts-container');
        titles.forEach(title => {
            const postDiv = document.createElement('div');
            postDiv.classList.add('post');
            postDiv.setAttribute("onclick", "location.href='http://localhost:8080/post/" + title.number+"'");
            postDiv.style.cssText = 'cursor:pointer;';
            postDiv.innerHTML = `
            <span style="display:inline-block; width:80px; text-align:center;">${title.number}</span><span style="display:inline-block; width:485px;text-align:left;">${title.title}</span><span style="display:inline-block; width:215px;text-align:left;">${title.writer}</span><span style="display:inline-block; width:100px;text-align:center;">${title.dateInfo}</span>`;
            postsContainer.appendChild(postDiv);
        });
    }
    var pageNumber = window.location.pathname.split("/").pop();
    fetch('http://localhost:8080/postlistinfo/' + pageNumber)
        .then(response => response.json())
        .then(data => renderPosts(data))
        .catch(error => console.error('erro', error));
</script>

</body>
</html>
